# 进度表

> 序号对应<结对编程项目需求>的功能序号
>
> 24.9.21 0:15 By Roeland

## 1.图形化界面

已完成：

- 登录界面(login.html)
- 选题界面(quiz.html)
- 出题界面(quiz-questions.html)
- 分数界面(score.html)
- 错题界面(error-questions.html)

未完成：

- 注册界面(register.html)
  - 功能未完善(具体见2)
- (可能需要的)登录后选项界面(用于登录后重置密码+进入选题做题的过渡?)

## 2.注册功能

已完成：

- 输入邮箱、密码即可注册

未完成：

- 注册码注册

## 3.设置密码

已完成：

- 最基础的注册输入密码

未完成：

- 输入两次密码匹配后设置成功
- 密码6-10位，含大小写+数字
- 登录状态下修改密码(这个登录状态可能还需要一个页面)

## 4.选择界面及功能

已完成

## 5.出题界面及功能

已完成

## 6.分数界面及其功能

已完成

## 7.退出/继续做题

已完成

## 8.其他

**页面优化设置**：

这个也可以先不急。或者在生成时让大模型自己先生成一个，后期再统一。

**用户鉴权与信息加密**：

这是我和班上其他同学交流的时候，发现的一个可以做也可以不做的功能。

**Or More ...**

## 9.遇到的问题

### 1.**题目渲染问题**

现在你在浏览器上运行现版本的项目，会发现答题界面上，题目的显示**会非常怪异**，像这样：

![image-20240921000158114](https://cdn.jsdelivr.net/gh/SomeFnone/blog_pic@main/img/image-20240921000158114.png)

这不是出题的bug，也不是显示的bug，**是我特意写成这样的！！！**

实际上web上的题目是`LaTeX`格式的数学公式，我希望的是能够通过`mathjax`等第三方库，在web端将数学表达式渲染成这个样子：
$\tan\left(\sqrt{20} \div 45\right) \div \cos\left(80 \cdot 68\right) \cdot 11$

但是不知道是哪里的错误(库导入没问题，库本身也没问题，这些都检验过了)，在`quiz-questions.html`中怎么改动都没法成功渲染；但是，在`/src/main/resources/templates/try.html`中尝试，也就是一个最简化的前端页面，只有要渲染的公式和导入的`mathjax`库，这样反而能够渲染成功....非常非常非常非常离谱，我前天晚上搞了3小时没搞定，就决定先搁置这个问题了。

如果后期我们没有解决这个问题，也好办，前端页面显示的这个题目文本，是调用了我新写的`ExpressionEvaluator`中的方法`toMarkDown`才变成这样的，本身题目的生成是用的你个人项目的代码，我没有做任何改动，仅做了适配。因此只要把调用函数的部分删掉即可。

### **2.页面权限设置**

因`org.springframework.security`包写死了生成认证用户的过程，而我们采用自定义的登录URL(/login)，所以暂时没法让通过我们自定义注册的用户获得spring的认证权限，因此无法设置页面权限，即：

```java
.requestMatchers("/login", "/register", "/error", "/quiz").permitAll() // 允许未认证用户访问登录、注册和错误页面
// .requestMatchers("/quiz").authenticated() // 允许认证用户访问选题、答题页面
```

如果这个权限问题无法解决，或暂时无法解决，可以将新建的页面放在`permitAll`中，即：

```java
.requestMatchers("/login", "/register", "/error", "/quiz", "/xxxxx").permitAll() // 允许未认证用户访问登录、注册和错误等页面
```

个人认为，该问题的优先度较低，不是要求中明确需要的，可以在前面的功能都完成后再解决。